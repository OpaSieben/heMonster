<!DOCTYPE HTML>
<html>
<head>
    <title>Hacky Easter 2017</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <script src="jquery.min.js"></script>
    <script type="text/javascript">

        var movRed = [{x: 1, y: -2}, {x: 1, y: 2}, {x: 1, y: 0}];
        var movGreen = [{x: 1, y: -2}, {x: 1, y: 1}, {x: 1, y: -2}];
        var movBlue = [{x: -1, y: 2}, {x: 3, y: -1}, {x: -1, y: 1}];
        var movYellow = [{x: -1, y: -1}, {x: -1, y: 2}, {x: -1, y: -3}];
        var movPink = [{x: -1, y: -1}, {x: 0, y: 3}, {x: -1, y: -1}];
        var movBrown = [{x: -1, y: -1}, {x: -1, y: 2}, {x: -1, y: -1}];

        function move(step, revert) {
            var vtable2 = document.getElementById("monsterTableCopy");
            var trows = vtable2.getElementsByTagName("tr");

            for (var x = 0; x < trows.length; x++) {
                var row = trows[x];
                var cells = row.getElementsByTagName("td");
                for (var y = 0; y < cells.length; y++) {
                    var point = vtable2.rows[x].cells[y];
                    var monstersInCellArr = point.getElementsByTagName("img");
                    for (var z = 0; z < monstersInCellArr.length; z++) {
                        var monster = monstersInCellArr[z];
//                        if (monstersInCellArr.length > 1)
                        if (parseInt(monster.alt) !== parseInt(step)) {
                            monster.alt = step;
                            var move = null;
                            switch (parseInt(monster.className)) {
                                case 1:
                                    move = movRed;
                                    break;
                                case 2:
                                    move = movGreen;
                                    break;
                                case 3:
                                    move = movBlue;
                                    break;
                                case 4:
                                    move = movYellow;
                                    break;
                                case 5:
                                    move = movPink;
                                    break;
                                case 6:
                                    move = movBrown;
                                    break;
                            }

                            point.removeChild(monster);


                            var newX = x + move[step].x;
                            var newY = y + move[step].y;

                            if (revert) {
                                newX = x - move[step].x;
                                newY = y - move[step].y;
                            }


                            if (newX >= trows.length)
                                newX -= trows.length ;

                            if (newX < 0)
                                newX += trows.length ;

                            if (newY >= cells.length)
                                newY -= cells.length ;

                            if (newY < 0)
                                newY += cells.length ;


                            var nextPoint = vtable2.rows[newX].cells[newY];
                            nextPoint.appendChild(monster);
                        } else {
                            console.log("inarray");
                        }
                    }
                }
            }
        }

        function twoMonsters(revert) {
            var vtable2 = document.getElementById("monsterTableCopy");
            var trows = vtable2.getElementsByTagName("tr");
            for (var x = 0; x < trows.length; x++) {
                var row = trows[x];
                var cells = row.getElementsByTagName("td");
                for (var y = 0; y < cells.length; y++) {
                    var monstersInCellArr = vtable2.rows[x].cells[y].getElementsByTagName("img");
                    if (monstersInCellArr.length > 0) {
                        vtable2.rows[x].cells[y].style.backgroundColor = "black";
                    } else if (revert)
                        vtable2.rows[x].cells[y].style.backgroundColor = "white";
                }
            }
        }

        function copyTable() {
            var source = document.getElementById('monsterTable');
            var destination = document.getElementById('monsterTableCopy');
            var copy = source.cloneNode(true);
            copy.setAttribute('id', 'monsterTableCopy');
            destination.parentNode.replaceChild(copy, destination);
            document.getElementById("monsterTable").style.display = "none";
            var vtable2 = document.getElementById("monsterTableCopy");
            var trows = vtable2.getElementsByTagName("tr");
            for (var x = 0; x < trows.length; x++) {
                var row = trows[x];
                var cells = row.getElementsByTagName("td");
                var clen = cells.length;
                for (var y = 0; y < clen; y++) {
                    var monstersInCellArr = vtable2.rows[x].cells[y].innerHTML.split(',');
                    var monster;
                    var monstersInCellArrLength = monstersInCellArr.length;
                    for (var i = 0; i < monstersInCellArrLength; i++) {
                        monster = monstersInCellArr.pop();
                        if (i >= 1) {
                            switch (parseInt(monster)) {
                                case 1:
                                    vtable2.rows[x].cells[y].innerHTML += "<img class='1' src='images/challenge/ico_red.png'>";
                                    break;
                                case 2:
                                    vtable2.rows[x].cells[y].innerHTML += "<img class='2' src='images/challenge/ico_green.png'>";
                                    break;
                                case 3:
                                    vtable2.rows[x].cells[y].innerHTML += "<img class='3' src='images/challenge/ico_blue.png'>";
                                    break;
                                case 4:
                                    vtable2.rows[x].cells[y].innerHTML += "<img class='4' src='images/challenge/ico_yellow.png'>";
                                    break;
                                case 5:
                                    vtable2.rows[x].cells[y].innerHTML += "<img class='5' src='images/challenge/ico_pink.png'>";
                                    break;
                                case 6:
                                    vtable2.rows[x].cells[y].innerHTML += "<img class='6' src='images/challenge/ico_brown.png'>";
                                    break;
                            }
                        } else {
                            switch (parseInt(monster)) {
                                case 1:
                                    vtable2.rows[x].cells[y].innerHTML = "<img class='1' src='images/challenge/ico_red.png'>";
                                    break;
                                case 2:
                                    vtable2.rows[x].cells[y].innerHTML = "<img class='2' src='images/challenge/ico_green.png'>";
                                    break;
                                case 3:
                                    vtable2.rows[x].cells[y].innerHTML = "<img class='3' src='images/challenge/ico_blue.png'>";
                                    break;
                                case 4:
                                    vtable2.rows[x].cells[y].innerHTML = "<img class='4' src='images/challenge/ico_yellow.png'>";
                                    break;
                                case 5:
                                    vtable2.rows[x].cells[y].innerHTML = "<img class='5' src='images/challenge/ico_pink.png'>";
                                    break;
                                case 6:
                                    vtable2.rows[x].cells[y].innerHTML = "<img class='6' src='images/challenge/ico_brown.png'>";
                                    break;
                            }
                        }
                    }
                }
            }
        }
    </script>
    <style type="text/css">
        #monsterTableCopy td {
            width: 30px;
            height: 30px;
            border: 1px solid black;
            background-color: white;
            padding: 0;
        }

        #monsterTableCopy td img {
            width: 12px;
        }

        img {
            margin: 0
        }
    </style>
</head>
<body>
<h2>Board</h2>
<table id="monsterTableCopy"/>
<table id="monsterTable" border="0" cellspacing="0" style="border-collapse: collapse; ">
    <tr>
        <td></td>
        <td>4</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>3</td>
        <td>6</td>
        <td></td>
        <td></td>
        <td>4,6</td>
        <td>3</td>
        <td>4</td>
        <td></td>
        <td></td>
        <td>5</td>
        <td></td>
        <td></td>
        <td>4</td>
        <td></td>
        <td>2,1</td>
        <td></td>
        <td></td>
        <td>4,6,3</td>
        <td></td>
        <td></td>
        <td>1</td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td>6</td>
        <td></td>
        <td>2</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>6</td>
        <td></td>
        <td>2</td>
        <td></td>
        <td>1</td>
        <td></td>
        <td>6</td>
        <td></td>
        <td>3</td>
        <td></td>
        <td>3</td>
        <td>1</td>
        <td></td>
        <td>2</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td>4</td>
        <td>6</td>
        <td>2</td>
        <td></td>
        <td></td>
        <td>3</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>3</td>
        <td></td>
        <td>6,1</td>
        <td></td>
        <td>1</td>
        <td></td>
        <td></td>
        <td></td>
        <td>1</td>
        <td></td>
        <td>6</td>
        <td>3,1</td>
        <td>3</td>
        <td></td>
        <td>3</td>
        <td>4</td>
    </tr>
    <tr>
        <td>6</td>
        <td></td>
        <td></td>
        <td>3,5</td>
        <td></td>
        <td>1</td>
        <td>1</td>
        <td></td>
        <td>1</td>
        <td></td>
        <td></td>
        <td></td>
        <td>6</td>
        <td>6</td>
        <td></td>
        <td></td>
        <td>5</td>
        <td>5</td>
        <td>3</td>
        <td></td>
        <td></td>
        <td>5,6,1</td>
        <td></td>
        <td>2</td>
        <td></td>
        <td></td>
        <td>3</td>
    </tr>
    <tr>
        <td>3</td>
        <td>2</td>
        <td>4</td>
        <td></td>
        <td></td>
        <td>6</td>
        <td>4</td>
        <td></td>
        <td></td>
        <td>3</td>
        <td></td>
        <td>1</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>4</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>2</td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>5</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>3,5</td>
        <td></td>
        <td>1</td>
        <td>3</td>
        <td>4</td>
        <td>3</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>3,6</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>3,6</td>
        <td>5</td>
        <td>6</td>
        <td>4</td>
        <td>4,6,2</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>6</td>
        <td>4,5,6</td>
        <td>6</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>6</td>
        <td></td>
        <td>4</td>
        <td></td>
        <td>4</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>2</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>5</td>
        <td></td>
    </tr>
    <tr>
        <td>2</td>
        <td>1</td>
        <td>5,2</td>
        <td>6</td>
        <td></td>
        <td>6</td>
        <td></td>
        <td></td>
        <td>1</td>
        <td>5</td>
        <td>6</td>
        <td></td>
        <td>1</td>
        <td></td>
        <td>1</td>
        <td>4,2</td>
        <td></td>
        <td></td>
        <td>5,6</td>
        <td></td>
        <td></td>
        <td></td>
        <td>2</td>
        <td></td>
        <td>1</td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td>3</td>
        <td>1</td>
        <td></td>
        <td></td>
        <td>1</td>
        <td></td>
        <td></td>
        <td>6</td>
        <td></td>
        <td>3</td>
        <td></td>
        <td></td>
        <td>5</td>
        <td></td>
        <td></td>
        <td>1</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>4</td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td>2</td>
        <td></td>
        <td>4</td>
        <td></td>
        <td></td>
        <td></td>
        <td>2</td>
        <td></td>
        <td>3,6</td>
        <td>4</td>
        <td>3,4</td>
        <td></td>
        <td></td>
        <td>1</td>
        <td></td>
        <td>1</td>
        <td></td>
        <td></td>
        <td>6</td>
        <td></td>
        <td>2,1</td>
        <td></td>
        <td>6</td>
        <td></td>
        <td></td>
        <td>6</td>
    </tr>
    <tr>
        <td>5</td>
        <td>4</td>
        <td></td>
        <td>5</td>
        <td></td>
        <td></td>
        <td>4</td>
        <td>4</td>
        <td></td>
        <td></td>
        <td></td>
        <td>5</td>
        <td></td>
        <td>4</td>
        <td>2</td>
        <td></td>
        <td></td>
        <td>5</td>
        <td></td>
        <td>3,2,1</td>
        <td></td>
        <td>3</td>
        <td></td>
        <td></td>
        <td>5</td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td>2,1</td>
        <td>4,5</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>6,1</td>
        <td>3</td>
        <td></td>
        <td>1</td>
        <td></td>
        <td></td>
        <td></td>
        <td>2</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>4</td>
        <td></td>
        <td>6</td>
        <td>3</td>
        <td>6,1</td>
        <td>5,2</td>
        <td>1</td>
    </tr>
    <tr>
        <td>2</td>
        <td></td>
        <td></td>
        <td></td>
        <td>2</td>
        <td></td>
        <td>5</td>
        <td>6</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>6</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>5</td>
        <td>5</td>
        <td></td>
        <td></td>
        <td>3</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td>1</td>
        <td>5</td>
        <td></td>
        <td></td>
        <td>1</td>
        <td></td>
        <td>2</td>
        <td>4</td>
        <td></td>
        <td></td>
        <td>6</td>
        <td></td>
        <td>2</td>
        <td>3</td>
        <td>6,2</td>
        <td>2</td>
        <td></td>
        <td>2</td>
        <td>6</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>6</td>
        <td>6,2</td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td>6</td>
        <td></td>
        <td>5</td>
        <td>3</td>
        <td>4</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>3</td>
        <td></td>
        <td>1</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>6</td>
        <td>3</td>
        <td>4</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>6,1</td>
        <td>3</td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td>5</td>
        <td></td>
        <td></td>
        <td></td>
        <td>6</td>
        <td>6</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>6</td>
        <td></td>
        <td>3</td>
        <td></td>
        <td></td>
        <td>4</td>
        <td></td>
        <td>4,1</td>
        <td></td>
        <td>5</td>
        <td></td>
        <td>6</td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>3,4</td>
        <td>1</td>
        <td></td>
        <td></td>
        <td>1</td>
        <td></td>
        <td></td>
        <td>1</td>
        <td>5,2,1</td>
        <td>2</td>
        <td>5</td>
        <td>6</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>3</td>
        <td></td>
        <td>4</td>
    </tr>
    <tr>
        <td>4</td>
        <td></td>
        <td></td>
        <td>4</td>
        <td></td>
        <td></td>
        <td></td>
        <td>5</td>
        <td></td>
        <td></td>
        <td>3</td>
        <td>3,4</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>4,5</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>4</td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td>6,1</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>3</td>
        <td></td>
        <td>5,6</td>
        <td>5</td>
        <td>1</td>
        <td></td>
        <td>6</td>
        <td></td>
        <td>1</td>
        <td></td>
        <td></td>
        <td></td>
        <td>5,2</td>
        <td>1</td>
        <td></td>
        <td>6</td>
        <td></td>
        <td>1</td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>3</td>
        <td></td>
        <td>5</td>
        <td>6</td>
        <td></td>
        <td></td>
        <td>3,6</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>1</td>
        <td>1</td>
        <td>2</td>
        <td></td>
    </tr>
    <tr>
        <td>5,6</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>4</td>
        <td></td>
        <td>6</td>
        <td>4,6</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>3,2</td>
        <td>6</td>
        <td>5</td>
        <td>5,2</td>
        <td></td>
        <td>3,1</td>
        <td></td>
        <td>3,1</td>
        <td>4</td>
        <td>2</td>
        <td>3,2</td>
        <td></td>
        <td>5,2</td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td>4</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>3</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>4</td>
        <td></td>
        <td></td>
        <td>5,6</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td>1</td>
        <td></td>
        <td>5</td>
        <td></td>
        <td></td>
        <td>3</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>4</td>
        <td></td>
        <td></td>
        <td></td>
        <td>6,4</td>
        <td>3</td>
        <td></td>
        <td>3,6,4</td>
        <td></td>
        <td></td>
        <td></td>
        <td>4</td>
        <td>2</td>
        <td>4</td>
        <td>3,5</td>
        <td></td>
    </tr>
    <tr>
        <td>5</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>5,6</td>
        <td>3,6,4</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>5</td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>4,5</td>
        <td></td>
        <td></td>
        <td></td>
        <td>4</td>
        <td></td>
        <td>2,5</td>
        <td></td>
        <td>2</td>
        <td></td>
        <td></td>
        <td>2,4</td>
        <td></td>
        <td>4</td>
        <td></td>
        <td></td>
        <td></td>
        <td>2,3</td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td>5</td>
        <td></td>
        <td></td>
        <td>2</td>
        <td>4,1</td>
        <td>1</td>
        <td>2</td>
        <td></td>
        <td></td>
        <td>4</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>1</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>4</td>
        <td></td>
        <td></td>
    </tr>

</table>
<script>
    copyTable();

    window.setInterval(function () {
        move(0, false);
////        twoMonsters();
//        move(1, false);
////        twoMonsters();
//        move(2, false);
//        twoMonsters();
    }, 5000)
</script>

</body>
</html>